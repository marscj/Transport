(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a59b012a","chunk-208d734c"],{"3b10":function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o}));var a=r("b775");function i(e){return a["a"].get("drivers/",{params:e})}function n(e,t){return a["a"].put("drivers/"+"".concat(e,"/"),t)}function s(e){return a["a"].post("drivers/",e)}function o(e){return a["a"].delete("drivers/"+"".concat(e,"/"))}},4405:function(e,t,r){},5213:function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return n})),r.d(t,"f",(function(){return s})),r.d(t,"a",(function(){return o})),r.d(t,"g",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return d}));var a=r("b775");function i(e){return a["a"].get("orders/",{params:e})}function n(e){return a["a"].get("orders/"+"".concat(e,"/"))}function s(e,t){return a["a"].put("orders/"+"".concat(e,"/"),t)}function o(e){return a["a"].post("orders/",e)}function c(e,t){return a["a"].put("order_itinerary/"+"".concat(e,"/"),t)}function l(e){return a["a"].post("order_itinerary/",e)}function d(e){return a["a"].delete("order_itinerary/"+"".concat(e,"/"))}},"7edd":function(e,t,r){},"85ce":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-card",{staticClass:"data-list-container",attrs:{id:"data-list-thumb-view"}},[r("data-view-sidebar",{attrs:{isSidebarActive:e.addNewDataSidebar,data:e.sidebarData},on:{closeSidebar:e.toggleDataSidebar}}),r("div",[r("div",{staticClass:"flex flex-wrap pt-4"},[r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"NAME"}},[r("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.name,callback:function(t){e.$set(e.localQueryParam,"name",t)},expression:"localQueryParam.name"}})],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"ACTIVE"}},[r("vs-checkbox",{model:{value:e.localQueryParam.is_active,callback:function(t){e.$set(e.localQueryParam,"is_active",t)},expression:"localQueryParam.is_active"}})],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",[r("button",{staticClass:"bg-teal-500 hover:bg-teal-700 focus:outline-none text-white font-bold rounded px-6 my-10",on:{click:function(){return e.$refs.table.refresh()}}},[e._v(" Search ")])])],1)])]),r("div",{directives:[{name:"action",rawName:"v-action:add_driver",arg:"add_driver"}],staticClass:"p-4"},[r("vs-button",{attrs:{type:"border","icon-pack":"feather",icon:"icon-plus"},on:{click:e.addNewData}},[e._v("Add New")])],1),r("s-table",{ref:"table",staticClass:"p-4",attrs:{columns:e.columns,data:e.loadData,showPagination:!1,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"name",fn:function(t,a){return[t?r("a",{on:{click:function(t){return e.editData(a)}}},[e._v(e._s(t))]):e._e()]}},{key:"phone",fn:function(t,a){return[t?r("a",{on:{click:function(t){return e.editData(a)}}},[e._v(e._s(t))]):e._e()]}},{key:"active",fn:function(t){return[r("a-checkbox",{attrs:{checked:t,disabled:""},on:{click:function(t){return e.editData(e.data)}}})]}},{key:"action",fn:function(t,a){return[r("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(t){return t.stopPropagation(),e.openConfirm(a.id)}}})]}}])})],1)},i=[],n=(r("4de4"),r("3b10")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:e.isSidebarActiveLocal,callback:function(t){e.isSidebarActiveLocal=t},expression:"isSidebarActiveLocal"}},[r("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[r("h4",[e._v(e._s(e.isEdit?"ADD NEW":"UPDATE")+" ITEM")]),r("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(t){t.stopPropagation(),e.isSidebarActiveLocal=!1}}})],1),r("vs-divider",{staticClass:"mb-0"}),r("VuePerfectScrollbar",{staticClass:"scroll-area--data-list-add-new",attrs:{settings:e.settings}},[r("div",{staticClass:"p-6"},[r("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){t.validate,t.dirty;return[r("validation-provider",{attrs:{name:"name",rules:"required|max:64|min:5"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-form-item",{attrs:{label:"Name"}},[r("a-input",{attrs:{"data-vv-validate-on":"blur"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("span",[e._v(e._s(a[0]))])]}}],null,!0)}),r("validation-provider",{attrs:{name:"phone",rules:"required|max:128|min:10"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-form-item",{attrs:{label:"phone"}},[r("a-input",{attrs:{"data-vv-validate-on":"blur"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),r("span",[e._v(e._s(a[0]))])]}}],null,!0)}),r("vs-checkbox",{staticClass:"mt-5 w-full",model:{value:e.form.is_active,callback:function(t){e.$set(e.form,"is_active",t)},expression:"form.is_active"}},[e._v("Active")]),r("validation-provider",{attrs:{name:"non_field_errors"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("span",[e._v(e._s(a[0]))])]}}],null,!0)})]}}])})],1)]),r("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[r("vs-button",{staticClass:"mr-6",on:{click:e.submit}},[e._v("Submit")]),r("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(t){e.isSidebarActiveLocal=!1}}},[e._v("Cancel")])],1)],1)},o=[],c=(r("4fad"),r("9d63")),l=r.n(c),d={components:{VuePerfectScrollbar:l.a},props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},watch:{isSidebarActive:function(e){e&&(this.form=Object.assign({},this.data))}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(e){e||this.$emit("closeSidebar")}},isEdit:function(){return 0===Object.entries(this.data).length}},data:function(){return{form:{id:void 0,name:"",phone:"",is_active:!0},settings:{maxScrollbarLength:60,wheelSpeed:.6}}},methods:{submit:function(){var e=this;this.isEdit?Object(n["a"])(this.form).then((function(){e.isSidebarActiveLocal=!1})).catch((function(t){t.response&&e.$refs.observer.setErrors(t.response.data.result)})):Object(n["d"])(this.form.id,this.form).then((function(){e.isSidebarActiveLocal=!1})).catch((function(t){t.response&&e.$refs.observer.setErrors(t.response.data.result)}))}}},u=d,f=(r("bc76"),r("2877")),v=Object(f["a"])(u,s,o,!1,null,"e50a41f0",null),m=v.exports,p=r("e1f9"),h={components:{DataViewSidebar:m,STable:p["a"]},props:{selectModel:{type:Boolean,default:!1},queryParam:{type:Object,default:function(){}}},data:function(){var e=this;return{localQueryParam:Object.assign({},this.queryParam),columns:[{title:"NAME",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"PHONE",dataIndex:"phone",scopedSlots:{customRender:"name"}},{title:"ACTIVE",dataIndex:"is_active",scopedSlots:{customRender:"active"}},{title:"ACTION",scopedSlots:{customRender:"action"}}].filter((function(t){return"ACTION"!=t.title?t:e.$auth("driver.delete_driver")?t:void 0})),addNewDataSidebar:!1,sidebarData:{},loadData:function(t){return Object(n["c"])(Object.assign(t,e.localQueryParam)).then((function(e){return e.result}))}}},methods:{addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},editData:function(e){this.selectModel?this.$emit("driver",e):this.$auth("driver.change_driver")&&(this.sidebarData=e,this.toggleDataSidebar(!0))},toggleDataSidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=e,e||this.$refs.table.refresh()},deleteData:function(e){var t=this;Object(n["b"])(e).then((function(){t.$refs.table.refresh()}))},openConfirm:function(e){var t=this;this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure delete?",accept:function(){return t.deleteData(e)}})}}},b=h,_=Object(f["a"])(b,a,i,!1,null,null,null);t["default"]=_.exports},a517:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-card",{staticClass:"data-list-container",attrs:{id:"data-list-thumb-view"}},[r("data-view-sidebar",{attrs:{isSidebarActive:e.addNewDataSidebar,data:e.sidebarData,categoryData:e.categoryData},on:{closeSidebar:e.toggleDataSidebar}}),r("div",[r("div",{staticClass:"flex flex-wrap pt-4"},[r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"LICENSE PLATE"}},[r("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.license_plate,callback:function(t){e.$set(e.localQueryParam,"license_plate",t)},expression:"localQueryParam.license_plate"}})],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"MODEL"}},[r("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.model,callback:function(t){e.$set(e.localQueryParam,"model",t)},expression:"localQueryParam.model"}})],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"SEATS"}},[r("a-input-number",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.seats,callback:function(t){e.$set(e.localQueryParam,"seats",t)},expression:"localQueryParam.seats"}})],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"CATEGORY"}},[r("a-select",{staticClass:"w-64",attrs:{allowClear:""},model:{value:e.localQueryParam.category,callback:function(t){e.$set(e.localQueryParam,"category",t)},expression:"localQueryParam.category"}},e._l(e.categoryData,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"DRIVER"}},[r("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.driver,callback:function(t){e.$set(e.localQueryParam,"driver",t)},expression:"localQueryParam.driver"}})],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"SUPPLIER"}},[r("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.supplier,callback:function(t){e.$set(e.localQueryParam,"supplier",t)},expression:"localQueryParam.supplier"}})],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",{attrs:{label:"ACTIVE"}},[r("vs-checkbox",{model:{value:e.localQueryParam.is_active,callback:function(t){e.$set(e.localQueryParam,"is_active",t)},expression:"localQueryParam.is_active"}})],1)],1),r("div",{staticClass:"px-4"},[r("a-form-item",[r("button",{staticClass:"bg-teal-500 hover:bg-teal-700 focus:outline-none text-white font-bold rounded px-6 my-10",on:{click:function(){return e.$refs.table.refresh()}}},[e._v("Search")])])],1)])]),e.selectModel?e._e():r("div",{directives:[{name:"action",rawName:"v-action:add_vehicle",arg:"add_vehicle"}],staticClass:"px-4"},[r("vs-button",{attrs:{type:"border","icon-pack":"feather",icon:"icon-plus"},on:{click:e.addNewData}},[e._v("Add New")])],1),r("s-table",{ref:"table",staticClass:"p-4",attrs:{columns:e.columns,data:e.loadData,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"license_plate",fn:function(t,a){return[t?r("a",{on:{click:function(t){return e.editData(a)}}},[e._v(e._s(t))]):e._e()]}},{key:"model",fn:function(t,a){return[t?r("a",{on:{click:function(t){return e.editData(a)}}},[e._v(e._s(t))]):e._e()]}},{key:"seats",fn:function(t,a){return[t?r("a",{on:{click:function(t){return e.editData(a)}}},[e._v(e._s(t))]):e._e()]}},{key:"category",fn:function(t,a){return[t?r("a",{on:{click:function(t){return e.editData(a)}}},[e._v(e._s(t.name))]):e._e()]}},{key:"driver",fn:function(t,a){return[t?r("a",{on:{click:function(t){return e.editData(a)}}},[e._v(e._s(t.name))]):e._e()]}},{key:"supplier",fn:function(t,a){return[t?r("a",{on:{click:function(t){return e.editData(a)}}},[e._v(e._s(t))]):e._e()]}},{key:"active",fn:function(t,a){return[r("a-checkbox",{attrs:{checked:t,disabled:""},on:{click:function(t){return e.editData(a)}}})]}},{key:"action",fn:function(t,a){return[r("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(t){return t.stopPropagation(),e.openConfirm(a.id)}}})]}}])})],1)},i=[],n=(r("4de4"),r("e64c")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:e.isSidebarActiveLocal,callback:function(t){e.isSidebarActiveLocal=t},expression:"isSidebarActiveLocal"}},[r("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[r("h4",[e._v(e._s(e.isEdit?"ADD NEW":"UPDATE")+" ITEM")]),r("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(t){t.stopPropagation(),e.isSidebarActiveLocal=!1}}})],1),r("vs-divider",{staticClass:"mb-0"}),r("VuePerfectScrollbar",{staticClass:"scroll-area--data-list-add-new",attrs:{settings:e.settings}},[r("div",{staticClass:"p-6"},[r("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){t.validate,t.dirty;return[r("validation-provider",{attrs:{name:"license_plate",rules:"required|max:16|min:5"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-form-item",{attrs:{label:"License plate"}},[r("a-input",{staticClass:"w-full",model:{value:e.form.license_plate,callback:function(t){e.$set(e.form,"license_plate",t)},expression:"form.license_plate"}})],1),r("span",[e._v(e._s(a[0]))])]}}],null,!0)}),r("validation-provider",{attrs:{name:"model",rules:"required|max:64|min:3"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-form-item",{attrs:{label:"Model"}},[r("a-input",{staticClass:"w-full",model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})],1),r("span",[e._v(e._s(a[0]))])]}}],null,!0)}),r("validation-provider",{attrs:{name:"seats",rules:"required|min_value:0"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-form-item",{attrs:{label:"Seats"}},[r("a-input-number",{staticClass:"w-full",attrs:{step:1},model:{value:e.form.seats,callback:function(t){e.$set(e.form,"seats",t)},expression:"form.seats"}})],1),r("span",[e._v(e._s(a[0]))])]}}],null,!0)}),r("validation-provider",{attrs:{name:"supplier",rules:"required|max:64|min:3"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-form-item",{attrs:{label:"Supplier"}},[r("a-input",{staticClass:"w-full",model:{value:e.form.supplier,callback:function(t){e.$set(e.form,"supplier",t)},expression:"form.supplier"}})],1),r("span",[e._v(e._s(a[0]))])]}}],null,!0)}),r("a-form-item",{attrs:{label:"Category"}},[r("v-select",{attrs:{options:e.categoryData,label:"name"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),r("validation-provider",{attrs:{name:"driver_id"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-form-item",{attrs:{label:"Driver"}},[r("v-select",{attrs:{options:e.driverData,label:"name"},model:{value:e.driver,callback:function(t){e.driver=t},expression:"driver"}})],1),r("span",[e._v(e._s(a[0]))])]}}],null,!0)}),r("vs-checkbox",{staticClass:"mt-5 w-full",model:{value:e.form.is_active,callback:function(t){e.$set(e.form,"is_active",t)},expression:"form.is_active"}},[e._v("Active")]),r("validation-provider",{attrs:{name:"non_field_errors"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("span",[e._v(e._s(a[0]))])]}}],null,!0)})]}}])})],1)]),r("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[r("vs-button",{staticClass:"mr-6",on:{click:e.submit}},[e._v("Submit")]),r("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(t){e.isSidebarActiveLocal=!1}}},[e._v("Cancel")])],1)],1)},o=[],c=(r("4fad"),r("9d63")),l=r.n(c),d=r("4a7a"),u=r.n(d),f=r("3b10"),v={components:{vSelect:u.a,VuePerfectScrollbar:l.a},props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}},categoryData:{type:Array,default:function(){return[]}}},watch:{isSidebarActive:function(e){e&&Object.entries(this.data).length&&(this.form=Object.assign({},this.data),this.category=Object.assign({},this.data.category),this.driver=Object.assign({},this.data.driver))}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(e){e||this.$emit("closeSidebar")}},isEdit:function(){return 0===Object.entries(this.data).length}},data:function(){return{form:{id:void 0,license_plate:"",model:"",supplier:"",is_active:!0,seats:5,category_id:void 0,driver_id:void 0},category:void 0,driver:void 0,driverData:[],settings:{maxScrollbarLength:60,wheelSpeed:.6}}},mounted:function(){this.getDriverData()},methods:{submit:function(){var e=this;this.isEdit?(delete this.form.category,delete this.form.driver,Object(n["d"])(this.form,Object.assign(this.form,{category_id:this.category?this.category.id:null,driver_id:this.driver?this.driver.id:null})).then((function(){e.isSidebarActiveLocal=!1})).catch((function(t){t.response&&e.$refs.observer.setErrors(t.response.data.result)}))):(delete this.form.category,delete this.form.driver,Object(n["q"])(this.form.id,Object.assign(this.form,{category_id:this.category?this.category.id:null,driver_id:this.driver?this.driver.id:null})).then((function(){e.isSidebarActiveLocal=!1})).catch((function(t){t.response&&e.$refs.observer.setErrors(t.response.data.result)})))},getDriverData:function(){var e=this;Object(f["c"])({vehicle:!0}).then((function(t){e.driverData=t.result}))}}},m=v,p=(r("fa00"),r("2877")),h=Object(p["a"])(m,s,o,!1,null,"3907a9fa",null),b=h.exports,_=r("e1f9"),y={components:{DataViewSidebar:b,STable:_["a"]},props:{selectModel:{type:Boolean,default:!1},queryParam:{type:Object,default:function(){return{is_active:!0}}}},data:function(){var e=this;return{localQueryParam:Object.assign({},this.queryParam),columns:[{title:"LICENSE PLATE",dataIndex:"license_plate",scopedSlots:{customRender:"license_plate"},align:"center",sorter:!0},{title:"MODEL",dataIndex:"model",scopedSlots:{customRender:"model"},align:"center",sorter:!0},{title:"SEATS",dataIndex:"seats",scopedSlots:{customRender:"seats"},align:"center",sorter:!0},{title:"CATEGORY",dataIndex:"category",scopedSlots:{customRender:"category"},align:"center",sorter:!0},{title:"DRIVER",dataIndex:"driver",scopedSlots:{customRender:"driver"},align:"center",sorter:!0},{title:"SUPPLIER",dataIndex:"supplier",scopedSlots:{customRender:"supplier"},align:"center",sorter:!0},{title:"ACTIVE",dataIndex:"is_active",scopedSlots:{customRender:"active"},align:"center",sorter:!0},{title:"ACTION",scopedSlots:{customRender:"action"},align:"center"}].filter((function(t){return"ACTION"!=t.title?t:e.$auth("itinerary.delete_itinerary")?t:void 0})),addNewDataSidebar:!1,sidebarData:{},categoryData:[],loadData:function(t){return Object(n["m"])(Object.assign(t,e.localQueryParam)).then((function(e){return e.result}))}}},mounted:function(){this.getCategoryData()},methods:{getCategoryData:function(){var e=this;Object(n["h"])().then((function(t){e.categoryData=t.result}))},addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},editData:function(e){this.selectModel?this.$emit("vehicle",e):this.$auth("vehicle.change_vehicle")&&(this.sidebarData=e,this.toggleDataSidebar(!0))},toggleDataSidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=e,e||this.$refs.table.refresh()},deleteData:function(e){var t=this;Object(n["g"])(e).then((function(){t.refresh()}))},refresh:function(){this.$refs.table.refresh()},openConfirm:function(e){var t=this;this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure delete?",accept:function(){return t.deleteData(e)}})}}},g=y,x=Object(p["a"])(g,a,i,!1,null,null,null);t["default"]=x.exports},ab06:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-checkbox",{staticClass:"pb-4",attrs:{disabled:!e.canChangeLock},model:{value:e.form.is_lock,callback:function(t){e.$set(e.form,"is_lock",t)},expression:"form.is_lock"}},[e._v("Lock")]),r("router-link",{attrs:{to:{name:"order_preview",params:{id:e.form.id}}}},[e._v(" Preview ")]),r("vs-card",{style:e.form.is_lock||!e.canChangeOrder?"background-color:#f5f5f5;":""},[r("div",{staticClass:"p-4 border border-gray-300"},[r("table",{staticClass:"table-auto w-full"},[r("thead",[r("tr",[r("th",{staticClass:"w-40 text-center py-3"},[e._v("ORDERID")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("RELATEDID")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("CREATE DATE")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("START DATE")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("END DATE")]),r("th",{staticClass:"text-center py-3"},[e._v("ITINERARY")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("CUSTOMER")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("OPERATOR")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("INVOICE")])])]),r("tbody",[r("tr",[r("td",{staticClass:"border px-4 py-3 text-center"},[e._v(e._s(e.form.orderId))]),r("td",{staticClass:"border px-4 py-3 text-center"},[e._v(e._s(e.form.relatedId))]),r("td",{staticClass:"border px-4 py-3 text-center"},[e._v(" "+e._s(e._f("moment")(e.form.create_at,"YYYY-MM-DD"))+" ")]),r("td",{staticClass:"border px-4 py-3 text-center"},[e._v(" "+e._s(e.form.start_date)+" ")]),r("td",{staticClass:"border px-4 py-3 text-center"},[e._v(e._s(e.form.end_date))]),r("td",{staticClass:"border px-4 py-3"},[r("p",[e._v("Category: "+e._s(e.form.category))]),r("p",[e._v("Seats: "+e._s(e.form.seats))]),r("p",[e._v("Passengers: "+e._s(e.form.passenger))]),r("p",[e._v("Itinerary:")]),r("pre",[e._v(e._s(e.form.itinerary))])]),r("td",{staticClass:"border px-4 py-3 text-center"},[e._v(" "+e._s(e.form.customer?e.form.customer.username:"")+" ")]),r("td",{staticClass:"border px-4 py-3 text-center"},[e._v(" "+e._s(e.form.operator?e.form.operator.username:"")+" ")]),r("td",{staticClass:"border px-4 py-3 text-center"},[e.form.invoice?r("router-link",{attrs:{to:{name:"invoice_detail",params:{id:e.form.invoice.id}}}},[r("pre",{staticClass:"text-gray-700"},[e._v(e._s(e.form.invoice.status))])]):r("span",[e._v("unknow")])],1)])])])]),r("div",{staticClass:"p-4 mt-4 border border-gray-300"},[r("table",{staticClass:"table-fixed w-full"},[r("thead",[r("tr",[r("th",{staticClass:"w-40 text-center py-3"},[e._v("DATE")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("TIME")]),r("th",{staticClass:"text-center py-3"},[e._v("ITINERARY")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("PRICE")]),r("th",{staticClass:"w-40 text-center py-3"},[e._v("PAYMENT")]),e.canDelItinerary?r("th",{staticClass:"w-40 text-center py-3"},[e._v(" ACTION ")]):e._e()])]),r("tbody",e._l(e.form.order_itinerary,(function(t){return r("tr",{key:t.id},[r("td",{staticClass:"border px-4 py-3 text-center"},[r("a",{on:{click:function(r){return e.openItinerary(t)}}},[e._v(e._s(t.date))])]),r("td",{staticClass:"border px-4 py-3 text-center"},[r("a",{on:{click:function(r){return e.openItinerary(t)}}},[e._v(e._s(t.time))])]),r("td",{staticClass:"border px-4 py-3 text-center"},[r("a",{on:{click:function(r){return e.openItinerary(t)}}},[e._v(e._s(t.itinerary?t.itinerary.name:""))])]),r("td",{staticClass:"border px-4 py-3 text-center"},[r("a",{on:{click:function(r){return e.openItinerary(t)}}},[e._v(e._s(t.price))])]),r("td",{staticClass:"border px-4 py-3 text-center"},[r("a",{on:{click:function(r){return e.openItinerary(t)}}},[e._v(e._s(t.payment))])]),e.canDelItinerary?r("td",{staticClass:"border px-4 py-3 text-center"},[r("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(r){return r.stopPropagation(),e.openConfirm(t.id)}}})],1):e._e()])})),0),r("t-foot",[e.canAddItinerary?r("button",{staticClass:"bg-teal-500 hover:bg-teal-700 focus:outline-none text-white font-bold py-2 px-3 rounded mt-4",on:{click:function(t){return e.openItinerary()}}},[e._v(" ADD ITINERARY ")]):e._e()])],1)]),r("div",{staticClass:"p-4"},[r("div",{staticClass:"flex flex-wrap"},[r("a-form-item",{staticClass:"flex-1 mr-6",attrs:{label:"VEHICLE"}},[r("a-input",{attrs:{disabled:!e.canChangeOrder,readonly:"",allowClear:""},on:{click:e.openVehicle,change:e.onVehicleChange},model:{value:e.vehicle,callback:function(t){e.vehicle=t},expression:"vehicle"}})],1),r("a-form-item",{staticClass:"flex-1 mx-6",attrs:{label:"DRIVER"}},[r("a-input",{attrs:{disabled:!e.canChangeOrder,readonly:"",allowClear:""},on:{click:function(t){e.driver_table_show=!e.driver_table_show},change:e.onDriverChange},model:{value:e.driver,callback:function(t){e.driver=t},expression:"driver"}})],1),r("a-form-item",{staticClass:"flex-1 mx-6",attrs:{label:"PHONE"}},[r("a-input",{attrs:{disabled:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),r("a-form-item",{staticClass:"flex-1 mx-6",attrs:{label:"STATUS"}},[r("a-select",{staticClass:"w-full",attrs:{disabled:!e.canChangeOrder},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.Status,(function(t,a){return r("a-select-option",{key:t,attrs:{value:t,disabled:a>2}},[e._v(e._s(t))])})),1)],1),r("a-form-item",{staticClass:"w-1/3 mr-6",attrs:{label:"REMARK"}},[r("a-textarea",{attrs:{disabled:!e.canChangeOrder},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e.canChangeOrder?r("button",{staticClass:"bg-teal-500 hover:bg-teal-700 focus:outline-none text-white font-bold py-2 px-3 rounded mt-4",on:{click:e.updateOrderData}},[e._v(" Update ")]):e._e()]),r("a-modal",{attrs:{title:e.itinerary_edit?"Itinerary Update":"Itinerary Create",width:800},on:{ok:e.handleItinerary},model:{value:e.itinerary_show,callback:function(t){e.itinerary_show=t},expression:"itinerary_show"}},[r("validation-observer",{ref:"observer_itinerary",scopedSlots:e._u([{key:"default",fn:function(t){t.validate,t.dirty;return[r("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:12}}},[r("a-form-item",{attrs:{label:"DATE",required:""}},[r("validation-provider",{attrs:{name:"date",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-date-picker",{staticClass:"w-64",model:{value:e.itinerary.date,callback:function(t){e.$set(e.itinerary,"date",t)},expression:"itinerary.date"}}),r("span",[e._v(e._s(a[0]))])]}}],null,!0)})],1),r("a-form-item",{attrs:{label:"TIME"}},[r("validation-provider",{attrs:{name:"time"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-time-picker",{staticClass:"w-64",attrs:{format:"HH:mm"},model:{value:e.itinerary.time,callback:function(t){e.$set(e.itinerary,"time",t)},expression:"itinerary.time"}}),r("span",[e._v(e._s(a[0]))])]}}],null,!0)})],1),r("a-form-item",{attrs:{label:"ITINERARY",required:""}},[r("validation-provider",{attrs:{name:"itinerary_id"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-select",{on:{change:e.onItineraryChange},model:{value:e.itinerary.itinerary,callback:function(t){e.$set(e.itinerary,"itinerary",t)},expression:"itinerary.itinerary"}},e._l(e.itineraryData,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1),r("span",[e._v(e._s(a[0]))])]}}],null,!0)})],1),r("a-form-item",{attrs:{label:"PRICE",required:""}},[r("validation-provider",{attrs:{name:"price"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-input",{attrs:{disabled:"",addonAfter:"AED"},model:{value:e.itinerary.price,callback:function(t){e.$set(e.itinerary,"price",t)},expression:"itinerary.price"}}),r("span",[e._v(e._s(a[0]))])]}}],null,!0)})],1),r("a-form-item",{attrs:{label:"PAYMENT",required:""}},[r("validation-provider",{attrs:{name:"payment"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("a-input",{attrs:{disabled:!e.canEditPayment,addonAfter:"AED"},model:{value:e.itinerary.payment,callback:function(t){e.$set(e.itinerary,"payment",t)},expression:"itinerary.payment"}}),r("span",[e._v(e._s(a[0]))])]}}],null,!0)})],1)],1)]}}])})],1),r("a-modal",{attrs:{title:"Vehicle",width:1024},model:{value:e.vehicle_table_show,callback:function(t){e.vehicle_table_show=t},expression:"vehicle_table_show"}},[r("vehicle-table",{ref:"vehicle",attrs:{selectModel:!0,queryParam:{is_active:!0,start_0:this.form.start_date,start_1:this.form.end_date,end_0:this.form.start_date,end_1:this.form.end_date}},on:{vehicle:e.onHandleVehicle}})],1),r("a-modal",{attrs:{title:"Driver",width:1024},model:{value:e.driver_table_show,callback:function(t){e.driver_table_show=t},expression:"driver_table_show"}},[r("driver-table",{attrs:{selectModel:!0,queryParam:{is_active:!0,start_0:this.form.start_date,start_1:this.form.end_date,end_0:this.form.start_date,end_1:this.form.end_date}},on:{driver:e.onHandleDriver}})],1)],1)],1)},i=[],n=(r("b0c0"),r("a9e3"),r("5213")),s=r("e64c"),o=r("a517"),c=r("85ce"),l=r("c32d"),d=r.n(l),u=["New","Confirm","Cancel","Complete","Paid"],f={components:{VehicleTable:o["default"],DriverTable:c["default"]},data:function(){return{Status:u,form:{},itinerary:{date:void 0,time:void 0,itinerary:void 0,price:void 0},vehicle:"",driver:"",phone:"",itineraryData:[],itinerary_show:!1,itinerary_edit:!1,vehicle_table_show:!1,driver_table_show:!1}},mounted:function(){this.getOrderData(),this.getItineraryData()},computed:{canChangeLock:function(){return this.$auth("order.change_lock")},canChangeOrder:function(){return this.$auth("order.change_order")&&!this.form.is_lock},canDelItinerary:function(){return this.$auth("orderitinerary.delete_orderitinerary")&&!this.form.is_lock},canAddItinerary:function(){return this.$auth("orderitinerary.add_orderitinerary")&&!this.form.is_lock},canChangeItinerary:function(){return this.$auth("orderitinerary.change_orderitinerary")&&!this.form.is_lock},canEditPayment:function(){return this.$auth("orderitinerary.edit_payment")&&!this.form.is_lock}},methods:{getItineraryData:function(){var e=this;Object(s["i"])().then((function(t){e.itineraryData=t.result}))},getOrderData:function(){var e=this;return Object(n["d"])(this.$route.params.id).then((function(t){e.form=t.result,e.vehicle=e.form.vehicle?e.form.vehicle.license_plate:null,e.driver=e.form.driver?e.form.driver.name:null,e.phone=e.form.driver?e.form.driver.phone:null}))},updateOrderData:function(){var e=this;Object(n["f"])(this.$route.params.id,this.form).then((function(t){e.form=t.result,e.$vs.notify({title:"Update ",text:"Success",iconPack:"feather",icon:"icon-alert-circle",color:"success"})})).catch((function(t){e.$vs.notify({title:"Error",text:t.message,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},onVehicleChange:function(e){""===e.target.value&&this.onHandleVehicle(null)},onHandleVehicle:function(e){this.vehicle_table_show=!1,e?(this.vehicle=e.license_plate,this.driver=e.driver?e.driver.name:null,this.phone=e.driver?e.driver.phone:null,this.form.vehicle_id=e.id,this.form.driver_id=e.driver?e.driver.id:null):(this.vehicle=null,this.driver=null,this.phone=null,this.form.vehicle_id=null,this.form.driver_id=null)},onDriverChange:function(e){""===e.target.value&&this.onHandleDriver(null)},onHandleDriver:function(e){this.driver_table_show=!1,e?(this.driver=e.name,this.phone=e.phone,this.form.driver_id=e.id):(this.driver=null,this.phone=null,this.form.driver_id=null)},onItineraryChange:function(e){var t=this;Object(s["k"])({category:this.form.category,itinerary:e}).then((function(e){t.itinerary.price=Number(e.result.price),t.itinerary.payment=Number(e.result.price)}))},openItinerary:function(e){if(e){if(!this.canChangeItinerary)return}else if(!this.canAddItinerary)return;this.itinerary_show=!0,this.itinerary_edit=!!e,this.itinerary=e?{id:e.id,date:d()(e.date,"YYYY-MM-DD"),time:e.time?d()(e.time,"HH:mm"):null,itinerary:e.itinerary.id,price:e.price,payment:e.payment}:{}},handleItinerary:function(){var e=this,t={order_id:this.form.id,itinerary_id:this.itinerary.itinerary?this.itinerary.itinerary:null,date:this.itinerary.date?d()(this.itinerary.date).format("YYYY-MM-DD"):null,time:this.itinerary.time?d()(this.itinerary.time).format("HH:mm"):null,price:this.itinerary.price,payment:this.itinerary.payment};this.itinerary_edit?Object(n["g"])(this.itinerary.id,t).then((function(t){e.getOrderData().then((function(){e.itinerary_show=!1}))})).catch((function(t){t.response&&e.$refs.observer_itinerary.setErrors(t.response.data.result)})):Object(n["b"])(t).then((function(t){e.getOrderData().then((function(){e.itinerary_show=!1}))})).catch((function(t){t.response&&e.$refs.observer_itinerary.setErrors(t.response.data.result)}))},deleteData:function(e){var t=this;Object(n["c"])(e).then((function(){t.getOrderData()}))},openConfirm:function(e){var t=this;this.canDelItinerary&&this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure delete?",accept:function(){return t.deleteData(e)}})},openVehicle:function(){this.vehicle_table_show=!0,this.$refs.vehicle&&this.$refs.vehicle.refresh()}}},v=f,m=r("2877"),p=Object(m["a"])(v,a,i,!1,null,null,null);t["default"]=p.exports},bc76:function(e,t,r){"use strict";var a=r("7edd"),i=r.n(a);i.a},fa00:function(e,t,r){"use strict";var a=r("4405"),i=r.n(a);i.a}}]);
//# sourceMappingURL=chunk-a59b012a.9761f6ec.js.map