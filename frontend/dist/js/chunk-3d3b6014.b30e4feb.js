(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d3b6014","chunk-4020a3c6"],{2638:function(e,t,a){"use strict";function r(){return r=Object.assign||function(e){for(var t,a=1;a<arguments.length;a++)for(var r in t=arguments[a],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)}var n=["attrs","props","domProps"],o=["class","style","directives"],i=["on","nativeOn"],s=function(e){return e.reduce((function(e,t){for(var a in t)if(e[a])if(-1!==n.indexOf(a))e[a]=r({},e[a],t[a]);else if(-1!==o.indexOf(a)){var s=e[a]instanceof Array?e[a]:[e[a]],c=t[a]instanceof Array?t[a]:[t[a]];e[a]=s.concat(c)}else if(-1!==i.indexOf(a))for(var d in t[a])if(e[a][d]){var u=e[a][d]instanceof Array?e[a][d]:[e[a][d]],p=t[a][d]instanceof Array?t[a][d]:[t[a][d]];e[a][d]=u.concat(p)}else e[a][d]=t[a][d];else if("hook"==a)for(var f in t[a])e[a][f]=e[a][f]?l(e[a][f],t[a][f]):t[a][f];else e[a]=t[a];else e[a]=t[a];return e}),{})},l=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=s},"46d6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("my-order",{attrs:{myOrder:!0}})},n=[],o=a("bdfa"),i={components:{MyOrder:o["default"]}},s=i,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,null,null);t["default"]=c.exports},5213:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d}));var r=a("b775");function n(e){return r["a"].get("orders/",{params:e})}function o(e){return r["a"].get("orders/"+"".concat(e,"/"))}function i(e,t){return r["a"].put("orders/"+"".concat(e,"/"),t)}function s(e){return r["a"].post("orders/",e)}function l(e,t){return r["a"].put("order_itinerary/"+"".concat(e,"/"),t)}function c(e){return r["a"].post("order_itinerary/",e)}function d(e){return r["a"].delete("order_itinerary/"+"".concat(e,"/"))}},bdfa:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vs-card",[a("div",[a("div",{staticClass:"flex flex-wrap pt-4"},[a("div",{staticClass:"px-4"},[a("a-form-item",{attrs:{label:"ORDERID"}},[a("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.orderId,callback:function(t){e.$set(e.localQueryParam,"orderId",t)},expression:"localQueryParam.orderId"}})],1)],1),a("div",{staticClass:"px-4"},[a("a-form-item",{attrs:{label:"RELATEDID"}},[a("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.relatedId,callback:function(t){e.$set(e.localQueryParam,"relatedId",t)},expression:"localQueryParam.relatedId"}})],1)],1),a("div",{staticClass:"px-4"},[a("a-form-item",{attrs:{label:"CREATE DATE"}},[a("a-range-picker",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.create,callback:function(t){e.$set(e.localQueryParam,"create",t)},expression:"localQueryParam.create"}})],1)],1),a("div",{staticClass:"px-4"},[a("a-form-item",{attrs:{label:"START DATE"}},[a("a-range-picker",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.start,callback:function(t){e.$set(e.localQueryParam,"start",t)},expression:"localQueryParam.start"}})],1)],1),a("div",{staticClass:"px-4"},[a("a-form-item",{attrs:{label:"VEHICLE"}},[a("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.vehicle,callback:function(t){e.$set(e.localQueryParam,"vehicle",t)},expression:"localQueryParam.vehicle"}})],1)],1),a("div",{staticClass:"px-4"},[a("a-form-item",{attrs:{label:"DRIVER"}},[a("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.driver,callback:function(t){e.$set(e.localQueryParam,"driver",t)},expression:"localQueryParam.driver"}})],1)],1),e.myOrder?e._e():a("div",{staticClass:"px-4"},[a("a-form-item",{attrs:{label:"CUSTOMER"}},[a("a-input",{staticClass:"hover:border-teal-500 focus:border-teal-500",model:{value:e.localQueryParam.customer,callback:function(t){e.$set(e.localQueryParam,"customer",t)},expression:"localQueryParam.customer"}})],1)],1),a("div",{staticClass:"px-4"},[a("a-form-item",{attrs:{label:"STATUS"}},[a("a-select",{staticClass:"w-48",model:{value:e.localQueryParam.status,callback:function(t){e.$set(e.localQueryParam,"status",t)},expression:"localQueryParam.status"}},e._l(e.Status,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),a("div",{staticClass:"px-4"},[a("a-form-item",[a("button",{staticClass:"bg-teal-500 hover:bg-teal-700 focus:outline-none text-white font-bold rounded px-6 my-10",on:{click:function(){return e.$refs.table.refresh()}}},[e._v("Search")])])],1)])]),e.myOrder?a("div",{staticClass:"px-4"},[a("vs-button",{attrs:{type:"border","icon-pack":"feather",icon:"icon-plus"},on:{click:e.addNewData}},[e._v("Add New")])],1):e._e(),a("s-table",{ref:"table",staticClass:"p-4",attrs:{rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,size:"middle",scroll:{x:"130%"}},scopedSlots:e._u([{key:"orderId",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("p",{staticClass:"text-gray-700"},[e._v(e._s(t))])])]}},{key:"relatedId",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t))])])]}},{key:"create_date",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(e._f("moment")(t,"YYYY-MM-DD")))])])]}},{key:"start_date",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t))])])]}},{key:"end_date",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t))])])]}},{key:"o-itinerary",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},e._l(t,(function(t){return a("pre",{key:t.id,staticClass:"whitespace-no-wrap font-normal"},[e._v("          "),a("span",{staticClass:"text-blue-500"},[e._v(e._s(e._f("moment")(t.date,"MM-DD")))]),e._v("\n          "),t.time?a("span",{staticClass:"text-blue-500"},[e._v(","+e._s(t.time.substring(0,5)))]):e._e(),e._v("\n          "),a("span",{staticClass:"text-blue-500"},[e._v(","+e._s(t.itinerary.name))]),e._v("\n        ")])})),0)]}},{key:"price",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},e._l(t,(function(t){return a("pre",{key:t.id,staticClass:"whitespace-no-wrap font-normal text-pink-500"},[e._v("          "),a("span",[e._v(e._s(t.price))]),e._v("\n        ")])})),0)]}},{key:"payment",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},e._l(t,(function(t){return a("pre",{key:t.id,staticClass:"whitespace-no-wrap font-normal text-pink-500"},[e._v("          "),a("span",[e._v(e._s(t.payment))]),e._v("\n        ")])})),0)]}},{key:"itinerary",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("p",[e._v("Category: "+e._s(t.category))]),a("p",[e._v("Seats: "+e._s(t.seats))]),a("p",[e._v("Passengers: "+e._s(t.passenger))]),a("p",[e._v("Itinerary:")]),a("pre",[e._v(e._s(t.itinerary))])])]}},{key:"vehicle",fn:function(t,r){return[t?a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t.license_plate))])]):e._e()]}},{key:"driver",fn:function(t,r){return[t?a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t.name))])]):e._e()]}},{key:"driver_phone",fn:function(t,r){return[t?a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t.phone))])]):e._e()]}},{key:"status",fn:function(t,r){return[a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t))])])]}},{key:"customer",fn:function(t,r){return[t?a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t.username))])]):e._e()]}},{key:"operator",fn:function(t,r){return[t?a("router-link",{attrs:{to:{name:"order_detail",params:{id:r.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t.username))])]):e._e()]}},{key:"invoice",fn:function(t){return[t?a("router-link",{attrs:{to:{name:"invoice_detail",params:{id:t.id}}}},[a("pre",{staticClass:"text-gray-700"},[e._v(e._s(t.status))])]):a("pre",{staticClass:"text-gray-700"},[e._v("unknow")])]}}])})],1)},n=[],o=a("5213"),i=a("e1f9"),s=(a("c32d"),["New","Confirm","Cancel","Complete","Paid"]),l={components:{STable:i["a"]},props:{myOrder:{type:Boolean,default:!1},queryParam:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{Status:s,localQueryParam:Object.assign({},this.queryParam),columns:[{title:"ORDERID",dataIndex:"orderId",scopedSlots:{customRender:"orderId"},align:"center",width:80,sorter:!0},{title:"RELATEDID",dataIndex:"relatedId",scopedSlots:{customRender:"relatedId"},align:"center",width:80,sorter:!0},{title:"CREATEDATE",dataIndex:"create_at",scopedSlots:{customRender:"create_date"},align:"center",width:110,sorter:!0},{title:"STARTDATE",dataIndex:"start_date",scopedSlots:{customRender:"start_date"},align:"center",width:110,sorter:!0},{title:"ENDDATE",dataIndex:"end_date",scopedSlots:{customRender:"end_date"},align:"center",width:110,sorter:!0},{title:"ITINERARY",children:[{title:"CUSTOMER ",scopedSlots:{customRender:"itinerary"},width:350},{title:"ORDER",dataIndex:"order_itinerary",scopedSlots:{customRender:"o-itinerary"}},{title:"PRICE",children:[{title:"PRICE(AED)",dataIndex:"order_itinerary",scopedSlots:{customRender:"price"}},{title:"PAYMENT(AED)",dataIndex:"order_itinerary",scopedSlots:{customRender:"payment"}}]}]},{title:"VEHICLE",dataIndex:"vehicle",scopedSlots:{customRender:"vehicle"},align:"center",width:100,sorter:!0},{title:"DRIVER",dataIndex:"driver",scopedSlots:{customRender:"driver"},align:"center",width:100,sorter:!0},{title:"PHONE",dataIndex:"driver",scopedSlots:{customRender:"driver_phone"},align:"center",width:100,sorter:!0},{title:"STATUS",dataIndex:"status",scopedSlots:{customRender:"status"},align:"center",width:80,sorter:!0},{title:"CUSTOMER",dataIndex:"customer",scopedSlots:{customRender:"customer"},align:"center",width:100,sorter:!0},{title:"OPERATOR",dataIndex:"operator",scopedSlots:{customRender:"operator"},align:"center",width:100,sorter:!0},{title:"INVOICE",dataIndex:"invoice",scopedSlots:{customRender:"invoice"},align:"center",width:100,sorter:!0}],loadData:function(t){return Object(o["e"])(Object.assign(t,{orderId:e.localQueryParam.orderId,relatedId:e.localQueryParam.relatedId,create_0:e.localQueryParam.create&&e.localQueryParam.create[0]?e.localQueryParam.create[0].format("YYYY-MM-DD"):void 0,create_1:e.localQueryParam.create&&e.localQueryParam.create[1]?e.localQueryParam.create[1].format("YYYY-MM-DD"):void 0,start_0:e.localQueryParam.start&&e.localQueryParam.start[0]?e.localQueryParam.start[0].format("YYYY-MM-DD"):void 0,start_1:e.localQueryParam.start&&e.localQueryParam.start[1]?e.localQueryParam.start[1].format("YYYY-MM-DD"):void 0,vehicle:e.localQueryParam.vehicle,driver:e.localQueryParam.driver,customer:e.localQueryParam.customer,status:e.localQueryParam.status})).then((function(e){return e.result}))}}},methods:{addNewData:function(){this.$router.push({name:"create_order"})}}},c=l,d=a("2877"),u=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=u.exports},e1f9:function(e,t,a){"use strict";a("a4d3"),a("99af"),a("4de4"),a("caad"),a("d81d"),a("b0c0"),a("a9e3"),a("e439"),a("dbb4"),a("b64b"),a("e25e"),a("2532"),a("159b");var r=a("2638"),n=a.n(r),o=a("53ca"),i=a("ade3"),s=a("4e72");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t["a"]={data:function(){return{needTotalList:[],selectedRows:[],selectedRowKeys:[],localLoading:!1,localDataSource:[],localPagination:Object.assign({},this.pagination)}},props:Object.assign({},s["Table"].props,{bordered:{type:Boolean,default:!0},rowKey:{type:[String,Function],default:"key"},data:{type:Function,required:!0},pageNum:{type:Number,default:1},pageSize:{type:Number,default:10},showSizeChanger:{type:Boolean,default:!0},size:{type:String,default:"default"},alert:{type:[Object,Boolean],default:null},rowSelection:{type:Object,default:null},showAlertInfo:{type:Boolean,default:!1},showPagination:{type:String|Boolean,default:"auto"},pageURI:{type:Boolean,default:!1}}),watch:{"localPagination.current":function(e){this.pageURI&&this.$router.push(c({},this.$route,{name:this.$route.name,query:Object.assign({},this.$route.query,{pageNo:e})}))},pageNum:function(e){Object.assign(this.localPagination,{current:e})},pageSize:function(e){Object.assign(this.localPagination,{pageSize:e})},showSizeChanger:function(e){Object.assign(this.localPagination,{showSizeChanger:e})}},created:function(){var e=this.$route.query.pageNo,t=this.pageURI&&e&&parseInt(e)||this.pageNum;this.localPagination=["auto",!0].includes(this.showPagination)&&Object.assign({},this.localPagination,{current:t,pageSize:this.pageSize,showSizeChanger:this.showSizeChanger})||!1,this.needTotalList=this.initTotalList(this.columns),this.loadData()},methods:{refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.localPagination=Object.assign({},{current:1,pageSize:this.pageSize})),this.loadData()},loadData:function(e,t,a){var r=this;this.localLoading=!0,e&&(this.localPagination=Object.assign({},e));var n=Object.assign({page:e&&e.current||this.showPagination&&this.localPagination.current||this.pageNum,page_size:e&&e.pageSize||this.showPagination&&this.localPagination.pageSize||this.pageSize},a&&a.field&&a.order&&{ordering:"ascend"===a.order?""+a.field:"-"+a.field}||{ordering:"-id"},c({},t)),i=this.data(this.showPagination?n:{ordering:"id"});"object"!==Object(o["a"])(i)&&"function"!==typeof i||"function"!==typeof i.then||i.then((function(t){if(r.localPagination=r.showPagination&&Object.assign({},r.localPagination,{current:r.localPagination.current,total:t.count,showSizeChanger:r.showSizeChanger,pageSize:e&&e.pageSize||r.localPagination.pageSize})||!1,r.showPagination&&0===t.results.length&&r.localPagination.current>1)return r.localPagination.current--,void r.loadData();try{["auto",!0].includes(r.showPagination)&&t.totalCount<=t.pageNo*r.localPagination.pageSize&&(r.localPagination.hideOnSinglePage=!0)}catch(a){r.localPagination=!1}r.localDataSource=r.showPagination?t.results:t,r.localLoading=!1})).catch((function(e){r.localLoading=!1,r.$vs.notify({title:"Error",text:e.message,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},initTotalList:function(e){var t=[];return e&&e instanceof Array&&e.forEach((function(e){e.needTotal&&t.push(c({},e,{total:0}))})),t},updateSelect:function(e,t){var a=this;this.selectedRows=t,this.selectedRowKeys=e;var r=this.needTotalList;this.needTotalList=r.map((function(e){return c({},e,{total:t.reduce((function(t,r){var n=t+parseInt(a.$_.get(r,e.dataIndex));return isNaN(n)?0:n}),0)})}))},clearSelected:function(){this.rowSelection&&(this.rowSelection.onChange([],[]),this.updateSelect([],[]))},renderClear:function(e){var t=this,a=this.$createElement;return this.selectedRowKeys.length<=0?null:a("a",{style:"margin-left: 24px",on:{click:function(){e(),t.clearSelected()}}},["清空"])},renderAlert:function(){var e=this.$createElement,t=this.needTotalList.map((function(t){return e("span",{style:"margin-right: 12px"},[t.title,"总计 ",e("a",{style:"font-weight: 600"},[t.customRender?t.customRender(t.total):t.total])])})),a="boolean"===typeof this.alert.clear&&this.alert.clear?this.renderClear(this.clearSelected):null!==this.alert&&"function"===typeof this.alert.clear?this.renderClear(this.alert.clear):null;return e("a-alert",{attrs:{showIcon:!0},style:"margin-bottom: 16px"},[e("template",{slot:"message"},[e("span",{style:"margin-right: 12px"},["已选择: ",e("a",{style:"font-weight: 600"},[this.selectedRows.length])]),t,a])])}},render:function(){var e=this,t=arguments[0],a={},r=Object.keys(this.$data),i="object"===Object(o["a"])(this.alert)&&null!==this.alert&&this.alert.show&&"undefined"!==typeof this.rowSelection.selectedRowKeys||this.alert;Object.keys(s["Table"].props).forEach((function(t){var n="local".concat(t.substring(0,1).toUpperCase()).concat(t.substring(1));if(r.includes(n))return a[t]=e[n],a[t];if("rowSelection"===t){if(i&&e.rowSelection)return a[t]=c({},e.rowSelection,{selectedRows:e.selectedRows,selectedRowKeys:e.selectedRowKeys,onChange:function(a,r){e.updateSelect(a,r),"undefined"!==typeof e[t].onChange&&e[t].onChange(a,r)}}),a[t];if(!e.rowSelection)return a[t]=null,a[t]}return e[t]&&(a[t]=e[t]),a[t]}));var l=t("a-table",n()([{},{props:a,scopedSlots:c({},this.$scopedSlots)},{on:{change:this.loadData}}]),[Object.keys(this.$slots).map((function(a){return t("template",{slot:a},[e.$slots[a]])}))]);return t("div",{class:"table-wrapper"},[i?this.renderAlert():null,l])}}}}]);
//# sourceMappingURL=chunk-3d3b6014.b30e4feb.js.map